module Struct.Flags exposing
   (
      Type,
      get_frequency,
      get_players
   )

-- Elm -------------------------------------------------------------------------
import Json.Decode

-- Extension -------------------------------------------------------------------
import Struct.Player

--------------------------------------------------------------------------------
-- TYPES -----------------------------------------------------------------------
--------------------------------------------------------------------------------
type alias Type =
   {
      frequency : Int,
      players : String
   }

--------------------------------------------------------------------------------
-- LOCAL -----------------------------------------------------------------------
--------------------------------------------------------------------------------

--------------------------------------------------------------------------------
-- EXPORTED --------------------------------------------------------------------
--------------------------------------------------------------------------------
get_frequency : Type -> Int
get_frequency flags = flags.frequency

get_players : Type -> (List Struct.Player.Type)
get_players flags =
   case
      (Json.Decode.decodeString
         (Json.Decode.list (Struct.Player.decoder))
         flags.players
      )
   of
      (Ok result) -> result
      (Err _) -> []
