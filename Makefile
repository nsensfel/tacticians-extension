################################################################################
## CONFIG ######################################################################
################################################################################
MODULES ?= background popup

SRC_DIR ?= ${CURDIR}/src
WWW_DIR ?= ${CURDIR}/www

################################################################################
## MAKEFILE MAGIC ##############################################################
################################################################################
MODULES_SRC = $(addprefix $(SRC_DIR)/,$(MODULES))

################################################################################
## SANITY CHECKS ###############################################################
################################################################################

################################################################################
## TARGET RULES ################################################################
################################################################################
all: build

build:
	for module in $(MODULES_SRC) ; do \
		$(MAKE) -C $$module build WWW_DIR="$(WWW_DIR)"; \
	done

clean:
	for module in $(MODULES_SRC) ; do \
		$(MAKE) -C $$module clean WWW_DIR="$(WWW_DIR)"; \
	done

reset:
	$(MAKE) clean
	for module in $(MODULES_SRC) ; do \
		$(MAKE) -C $$module reset WWW_DIR="$(WWW_DIR)"; \
	done

################################################################################
## INTERNAL RULES ##############################################################
################################################################################
